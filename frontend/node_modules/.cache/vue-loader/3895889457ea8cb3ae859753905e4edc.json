{"remainingRequest":"C:\\Users\\evgil_000\\Documents\\Work\\webdev\\Project3\\group1-rw334-project-2\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\evgil_000\\Documents\\Work\\webdev\\Project3\\group1-rw334-project-2\\frontend\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\evgil_000\\Documents\\Work\\webdev\\Project3\\group1-rw334-project-2\\frontend\\src\\components\\Login.vue","mtime":1591548573630},{"path":"C:\\Users\\evgil_000\\Documents\\Work\\webdev\\Project3\\group1-rw334-project-2\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591191684154},{"path":"C:\\Users\\evgil_000\\Documents\\Work\\webdev\\Project3\\group1-rw334-project-2\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1591191671925},{"path":"C:\\Users\\evgil_000\\Documents\\Work\\webdev\\Project3\\group1-rw334-project-2\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591191684154},{"path":"C:\\Users\\evgil_000\\Documents\\Work\\webdev\\Project3\\group1-rw334-project-2\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1591191719685}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcm5hbWU6ICcnLA0KICAgICAgcGFzc3dvcmQ6ICcnDQogICAgfQ0KICB9LCANCiAgbWV0aG9kczogew0KICAgIGF1dGhlbnRpY2F0ZSAoKSB7DQogICAgICBjb25zdCBwYXlsb2FkID0gew0KICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwNCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQNCiAgICAgIH0NCiAgICAgIGF4aW9zLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuZW5kcG9pbnRzLm9idGFpbkpXVCwgcGF5bG9hZCkNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVUb2tlbicsIHJlc3BvbnNlLmRhdGEudG9rZW4pDQogICAgICAgICAgLy8gZ2V0IGFuZCBzZXQgYXV0aCB1c2VyDQogICAgICAgICAgY29uc3QgYmFzZSA9IHsNCiAgICAgICAgICAgIGJhc2VVUkw6IHRoaXMuJHN0b3JlLnN0YXRlLmVuZHBvaW50cy5iYXNlVXJsLA0KICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgLy8gU2V0IHlvdXIgQXV0aG9yaXphdGlvbiB0byAnSldUJywgbm90IEJlYXJlciEhIQ0KICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgSldUICR7dGhpcy4kc3RvcmUuc3RhdGUuand0fWAsDQogICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB4aHJGaWVsZHM6IHsNCiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgLy8gRXZlbiB0aG91Z2ggdGhlIGF1dGhlbnRpY2F0aW9uIHJldHVybmVkIGEgdXNlciBvYmplY3QgdGhhdCBjYW4gYmUNCiAgICAgICAgICAvLyBkZWNvZGVkLCB3ZSBmZXRjaCBpdCBhZ2Fpbi4gVGhpcyB3YXkgd2UgYXJlbid0IHN1cGVyIGRlcGVuZGFudCBvbg0KICAgICAgICAgIC8vIEpXVCBhbmQgY2FuIHBsdWcgaW4gc29tZXRoaW5nIGVsc2UuDQogICAgICAgICAgY29uc3QgYXhpb3NJbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZShiYXNlKQ0KICAgICAgICAgIGF4aW9zSW5zdGFuY2Uoew0KICAgICAgICAgICAgdXJsOiAiL3VzZXIvIiwNCiAgICAgICAgICAgIG1ldGhvZDogImdldCIsDQogICAgICAgICAgICBwYXJhbXM6IHt9DQogICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEF1dGhVc2VyIiwNCiAgICAgICAgICAgICAgICB7YXV0aFVzZXI6IHJlc3BvbnNlLmRhdGEsIGlzQXV0aGVudGljYXRlZDogdHJ1ZX0NCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ0hvbWUnfSkNCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgICBjb25zb2xlLmRlYnVnKGVycm9yKTsNCiAgICAgICAgICBjb25zb2xlLmRpcihlcnJvcik7DQogICAgICAgIH0pDQogICAgfQ0KICB9LA0KDQoNCg0KfQ0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <form class=\"login form\">\r\n    <div class=\"field\">\r\n      <label for=\"id_username\">Username</label>\r\n      <input\r\n        v-model=\"username\"\r\n        type=\"text\"\r\n        placeholder=\"Username\"\r\n        autofocus=\"autofocus\"\r\n        maxlength=\"150\"\r\n        id=\"id_username\">\r\n    </div>\r\n    <div class=\"field\">\r\n      <label for=\"id_password\">Password</label>\r\n      <input\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        placeholder=\"Password\"\r\n        id=\"id_password\">\r\n    </div>\r\n    <button\r\n      @click.prevent=\"authenticate\"\r\n      class=\"button primary\"\r\n      type=\"submit\">\r\n      Log In\r\n    </button>\r\n  <div>\r\n    <small>Need an account? Register <router-link to=\"/Register\">Here</router-link> </small>\r\n  </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      username: '',\r\n      password: ''\r\n    }\r\n  }, \r\n  methods: {\r\n    authenticate () {\r\n      const payload = {\r\n        username: this.username,\r\n        password: this.password\r\n      }\r\n      axios.post(this.$store.state.endpoints.obtainJWT, payload)\r\n        .then((response) => {\r\n          this.$store.commit('updateToken', response.data.token)\r\n          // get and set auth user\r\n          const base = {\r\n            baseURL: this.$store.state.endpoints.baseUrl,\r\n            headers: {\r\n            // Set your Authorization to 'JWT', not Bearer!!!\r\n              Authorization: `JWT ${this.$store.state.jwt}`,\r\n              'Content-Type': 'application/json'\r\n            },\r\n            xhrFields: {\r\n                withCredentials: true\r\n            }\r\n          }\r\n          // Even though the authentication returned a user object that can be\r\n          // decoded, we fetch it again. This way we aren't super dependant on\r\n          // JWT and can plug in something else.\r\n          const axiosInstance = axios.create(base)\r\n          axiosInstance({\r\n            url: \"/user/\",\r\n            method: \"get\",\r\n            params: {}\r\n          })\r\n            .then((response) => {\r\n              this.$store.commit(\"setAuthUser\",\r\n                {authUser: response.data, isAuthenticated: true}\r\n              )\r\n              this.$router.push({name: 'Home'})\r\n            })\r\n\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          console.debug(error);\r\n          console.dir(error);\r\n        })\r\n    }\r\n  },\r\n\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n</style>\r\n"]}]}